<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring Tempereature & Humidity</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/logo ipj.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inria+Serif:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- MAIN -->
    <main>

        <!-- CONTAINER -->
        <div class="container">
            <div class="header">
                <div class="logo">
                    <img src="./assets/logo ipj.png" alt="PT IPJ Logo">
                </div>
                <div class="company-name">PT INDOPHERIN JAYA</div>
                <div class="title">TEMPERATURE AND HUMIDITY MONITORING</div>
            </div>

            <!-- CONTENT -->
            <div class="content">

                <!-- IN -->
                <div class="section">
                    <div class="section-header">IN</div>
                    <div class="data-item">
                        <div class="temp-humid" class="value" id="temperature-in-p1">80 &#8451</div>
                        <div class="temp-humid" class="value" id="humidity-in-p1">76%</div>
                        <div class="location">P1</div>
                    </div>
                    <div class="data-item">
                        <div class="temp-humid" class="value" id="temperature-in-p2">80 &#8451</div>
                        <div class="temp-humid" class="value" id="humidity-in-p2">76%</div>
                        <div class="location">P2</div>
                    </div>
                </div>

                <!-- OUT -->
                <div class="section">
                    <div class="section-header">OUT</div>
                    <div class="data-item">
                        <div class="temp-humid" class="value" id="temperature-out-p1">80 &#8451</div>
                        <div class="temp-humid" class="value" id="humidity">-</div>
                        <div class="location">P1</div>
                    </div>
                    <div class="data-item">
                        <div class="temp-humid" class="value" id="temperature-out-p2">80 &#8451</div>
                        <div class="temp-humid" class="value" id="humidity">-</div>
                        <div class="location">P2</div>
                    </div>
                </div>

                <!-- ROOM -->
                <div class="section">
                    <div class="section-header">ROOM</div>
                    <div class="data-item">
                        <div class="temp-humid" class="value" id="temperature-room-p1">80 &#8451</div>
                        <div class="temp-humid" class="value" id="humidity-room-p1">76%</div>
                        <div class="location">P1</div>
                    </div>
                    <div class="data-item">
                        <div class="temp-humid" class="value" id="temperature-room-p2">80 &#8451</div>
                        <div class="temp-humid" class="value" id="humidity-room-p2">76%</div>
                        <div class="location">P2</div>
                    </div>
                </div>
            </div>                 
        </div>
    </main>

    <!-- Menambahkan Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <!-- CUSTOM JS LINK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        // import { getDatabase, ref, onValue } from "firebase/database";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCIpOqZ74Gx1_0sl3nXF6SWi0XzKX9U0mQ",
            authDomain: "temp-and-humidity-11831.firebaseapp.com",
            databaseURL: "https://temp-and-humidity-11831-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "temp-and-humidity-11831",
            storageBucket: "temp-and-humidity-11831.appspot.com",
            messagingSenderId: "168620513581",
            appId: "1:168620513581:web:9f91f8c538f59d97429ba4"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Mengambil referensi data dari firebase
        let database = firebase.database();

        // Ambil referensi ke lokasi data di Firebase
        let inP1TempRef = database.ref('IN/P1/Temperature');
        let inP1HumRef = database.ref('IN/P1/Humidity');
        let inP2TempRef = database.ref('IN/P2/Temperature');
        let inP2HumRef = database.ref('IN/P2/Humidity');
        let outP1TempRef = database.ref('OUT/P1/Temperature');
        let outP2TempRef = database.ref('OUT/P2/Temperature');
        let roomP1TempRef = database.ref('ROOM/P1/Temperature');
        let roomP1HumRef = database.ref('ROOM/P1/Humidity');
        let roomP2TempRef = database.ref('ROOM/P2/Temperature');
        let roomP2HumRef = database.ref('ROOM/P2/Humidity');

        // ambil data IN
        inP1TempRef.on('value', function(getdata1){
            let temp = getdata1.val();
            document.getElementById('temperature-in-p1').innerHTML = temp + "&#8451"
        })

        inP1HumRef.on('value', function(getdata2){
            let humi = getdata2.val();
            document.getElementById('humidity-in-p1').innerHTML = humi + "%"
        })

        inP2TempRef.on('value', function(getdata3){
            let temp = getdata3.val();
            document.getElementById('temperature-in-p2').innerHTML = temp + "&#8451"
        })

        inP2HumRef.on('value', function(getdata4){
            let humi = getdata4.val();
            document.getElementById('humidity-in-p2').innerHTML = humi + "%"
        })

        // AMBIL DATA OUT
        outP1TempRef.on('value', function(getdata5){
            let temp = getdata5.val();
            document.getElementById('temperature-out-p1').innerHTML = temp + "&#8451"
        })

        outP2TempRef.on('value', function(getdata6){
            let temp = getdata6.val();
            document.getElementById('temperature-out-p2').innerHTML = temp + "&#8451"
        })

        // AMBIL DATA ROOM
        roomP1TempRef.on('value', function(getdata7){
            let temp = getdata7.val();
            document.getElementById('temperature-room-p1').innerHTML = temp + "&#8451"
        })

        roomP1HumRef.on('value', function(getdata8){
            let humi = getdata8.val();
            document.getElementById('humidity-room-p1').innerHTML = humi + "%"
        })

        roomP2TempRef.on('value', function(getdata9){
            let temp = getdata9.val();
            document.getElementById('temperature-room-p2').innerHTML = temp + "&#8451"
        })

        roomP2HumRef.on('value', function(getdata10){
            let humi = getdata10.val();
            document.getElementById('humidity-room-p2').innerHTML = humi + "%"
        })
    </script>
    <script src="./js/script.js"></script>
    
    <!-- <script src=""></script> -->
</body>
</html>